// Open Data Platform Warehouse Schema
// Only tables actively managed by dbt and Airflow pipelines.

Project open_data_platform_dw {
  database_type: 'PostgreSQL'
  Note: 'Open Data Platform Warehouse â€” Pipeline-managed tables'
}

// ===========================================
// JOB MARKET NL Domain
// Pipeline: dags/job_market_nl_dag.py
// dbt: dbt_parallel/models/job_market_nl/
// ===========================================

Table it_market_snapshot {
  period_key text [pk, not null, note: 'Period identifier (e.g. 2024Q1)']
  period_label text [note: 'Human-readable period label (e.g. 2024 Q1)']
  sector_name text [note: 'Industry sector name from CBS SIC2008 classification']
  vacancies double [note: 'Number of open vacancies reported by CBS']
  vacancy_rate double [note: 'Vacancy rate as percentage (vacancies / total positions)']
  job_ads_count int [not null, note: 'Number of IT job ads found from Adzuna']
  loaded_at timestamptz [not null, default: `now()`, note: 'Pipeline load timestamp']
  Note: 'Latest IT market snapshot combining CBS vacancy rate with Adzuna job ads counts. Refreshed daily by job_market_nl_pipeline DAG.'
}

Table it_market_top_skills {
  skill text [pk, not null, note: 'Skill name extracted from job ad descriptions']
  count int [not null, note: 'Number of job ads mentioning this skill']
  loaded_at timestamptz [not null, default: `now()`, note: 'Pipeline load timestamp']
  Note: 'Top skills extracted from IT job advertisements, ranked by frequency. Refreshed daily by job_market_nl_pipeline DAG.'
}

Table it_market_region_distribution {
  region text [pk, not null, note: 'Dutch province name']
  job_ads_count int [not null, note: 'Number of job ads in this region']
  share_pct double [not null, note: 'Percentage share of total job ads']
  latitude double [not null, note: 'Province centroid latitude']
  longitude double [not null, note: 'Province centroid longitude']
  loaded_at timestamptz [not null, default: `now()`, note: 'Pipeline load timestamp']
  Note: 'Regional distribution of IT job ads across Dutch provinces. Refreshed daily by job_market_nl_pipeline DAG.'
}

Table it_market_job_ads_geo {
  job_id text [pk, not null, note: 'Unique job ad identifier from Adzuna']
  region text [not null, note: 'Province or region name']
  latitude double [not null, note: 'Latitude of the job ad location']
  longitude double [not null, note: 'Longitude of the job ad location']
  location_label text [note: 'Human-readable location label']
  loaded_at timestamptz [not null, default: `now()`, note: 'Pipeline load timestamp']
  Note: 'Geo-coded individual IT job ad locations for map visualizations. Refreshed daily by job_market_nl_pipeline DAG.'
}
