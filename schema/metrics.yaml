version: "1.0"
updated_by: "data-governance"

defaults:
  timezone: "Europe/Amsterdam"
  freshness_sla_hours: 24
  certification: "draft"

metrics:
  - id: job_market_total_vacancies
    name: "Total Vacancies"
    domain: "job_market_nl"
    owner: "job-market.owner@example.com"
    steward: "job-market.steward@example.com"
    description: "Sum of vacancies in the latest job market snapshot."
    status: "ACTIVE"
    certification: "DRAFT"
    grain: "month"
    source:
      dataset: "job_market_nl.it_market_snapshot"
      primary_key: "period_key"
      timestamp_column: "period_key"
    dimensions:
      - "sector_name"
    formula:
      sql: "SUM(vacancies)"
      null_handling: "null_as_zero"
    slas:
      freshness_hours: 168
      availability_percent: 99.0
    quality_checks:
      - name: "vacancies_not_null"
        rule: "vacancies IS NOT NULL"
        severity: "medium"
    lineage:
      upstream_datasets:
        - "job_market_nl.it_market_snapshot"
    change_policy:
      breaking_change_requires: "analytics_lead_approval"
